#!/bin/sh

files="etc"
filesdot="bin var .tmux .vimrc .vim .config/nvim"
filesproj="proj work"
filesfull="$files $filesdot $filesproj"
filesbrave=".config/BraveSoftware .cache/BraveSoftware"

taroptions="--ignore-failed-read -czf"

usage="Usage: $(basename $0) [-h|--help] [-f]

Backup ~/$files

With -d backup $filesdot
With -p backup $filesproj
With -f backup $filesfull
With -b backup $filesbrave
"

case "$1" in
    -h | --help) echo "$usage"; exit ;;
    -d ) dot=1  ;; 
    -p ) proj=1 ;;
    -f ) full=1 ;;
    -b ) brave=1 ;;
    -* ) echo "$usage"; exit ;;
esac

t=$(date +%d-%m-%Y)-$(hostname)
arj=$t.tar.gz
if [ "$dot" ]; then
    arj=$t-dot.tar.gz
    files="$filesdot"
elif [ "$proj" ]; then
    arj=$t-projwork.tar.gz
    files="$filesproj"
elif [ "$full" ]; then
    arj=$t-full.tar.gz
    files="$filesfull"
elif [ "$brave" ]; then
    arj=$t-brave.tar.gz
    files="$filesbrave"
fi

cd $HOME

# TODO check for existing
tar $taroptions $arj $files
